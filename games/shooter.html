<!doctype html>
<html lang="de"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Shooter</title><link rel="stylesheet" href="../assets/styles.css"/></head>
<body><main class="page"><div class="container" style="align-items:stretch;max-width:820px;">
<h1 class="name"><span class="gradient-text">Shooter</span></h1>
<section class="card"><canvas id="c" width="480" height="260" class="vgame" style="width:100%;height:260px;display:block"></canvas><div class="muted">Arrows/A,D move, Space/W shoot</div></section>
<footer class="footer"><p>Â© <span id="y"></span> Maro</p></footer></div></main>
<script type="module">
import { unlockAchievement } from '../components/achievements.js'; unlockAchievement('shooter_arcade');
document.getElementById('y').textContent = new Date().getFullYear();
const c=document.getElementById('c'),x=c.getContext('2d'); let w=c.width,h=c.height; let px=w/2, py=h-15; let left=false,right=false, bullets=[], enemies=[], t=0, alive=true;
function spawn(){ enemies.push({x:Math.random()*w, y:-10, v:1+Math.random()*1.5}); }
function step(){ if(!alive) return; t++; if(t%40===0) spawn(); if(left) px-=3; if(right) px+=3; if(px<0) px=0; if(px>w) px=w; bullets.forEach(b=>b.y-=4); enemies.forEach(e=>e.y+=e.v);
  for(let i=enemies.length-1;i>=0;i--){ const e=enemies[i]; if(Math.abs(e.x-px)<8 && Math.abs(e.y-py)<8){ alive=false; } for(let j=bullets.length-1;j>=0;j--){ const b=bullets[j]; if(Math.abs(e.x-b.x)<6 && Math.abs(e.y-b.y)<6){ enemies.splice(i,1); bullets.splice(j,1); break; } } }
  bullets=bullets.filter(b=>b.y>-10); enemies=enemies.filter(e=>e.y<h+10);
  x.clearRect(0,0,w,h); x.fillStyle='rgba(0,0,0,.2)'; x.fillRect(0,0,w,h); x.fillStyle='#00ffc8'; x.fillRect(px-5,py-5,10,10); x.fillStyle='#aee7df'; bullets.forEach(b=>x.fillRect(b.x-2,b.y-6,2,6)); enemies.forEach(e=>x.fillRect(e.x-5,e.y-5,10,10)); requestAnimationFrame(step);
}
function start(){
  window.addEventListener('keydown',e=>{ if(e.key==='ArrowLeft'||e.key==='a'||e.key==='A') left=true; if(e.key==='ArrowRight'||e.key==='d'||e.key==='D') right=true; if(e.code==='Space'||e.key==='w'||e.key==='W'){ bullets.push({x:px,y:py-8}); } });
  window.addEventListener('keyup',e=>{ if(e.key==='ArrowLeft'||e.key==='a'||e.key==='A') left=false; if(e.key==='ArrowRight'||e.key==='d'||e.key==='D') right=false; });
  step();
}
window.addEventListener('terminal:interrupt', ()=>{ alive=false; });
const fs=document.createElement('div'); fs.style.cssText='position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,.6);z-index:1005;color:#e5eef8;font:14px ui-monospace;'; fs.innerHTML='<div class="card" style="padding:12px 16px">Click to enter fullscreen and play</div>'; document.body.appendChild(fs); fs.addEventListener('click', async ()=>{ try{ await document.documentElement.requestFullscreen?.(); }catch(_){} fs.remove(); start(); });
 </script>
 <script type="module" src="../assets/version.js"></script>
 </body></html>
