<!doctype html>
<html lang="de"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Snake</title><link rel="stylesheet" href="../assets/styles.css"/></head>
<body><main class="page"><div class="container" style="align-items:stretch;max-width:820px;">
<h1 class="name"><span class="gradient-text">Snake</span></h1>
<section class="card"><canvas id="c" width="480" height="260" class="vgame" style="width:100%;height:260px;display:block"></canvas><div class="muted">Use arrow keys or WASD</div></section>
<footer class="footer"><p>Â© <span id="y"></span> Maro</p></footer></div></main>
<script type="module">
import { unlockAchievement } from '../components/achievements.js';
unlockAchievement('snake_master');
document.getElementById('y').textContent = new Date().getFullYear();
const canvas = document.getElementById('c'); const ctx=canvas.getContext('2d'); let W=canvas.width,H=canvas.height; let cw=20, cols=Math.floor(W/cw), rows=Math.floor(H/cw);
let snake=[[5,5]], dir=[1,0], food=[10,7], running=true, score=0; function placeFood(){ food=[Math.floor(Math.random()*cols), Math.floor(Math.random()*rows)]; }
function step(){ if(!running) return; const head=[(snake[0][0]+dir[0]+cols)%cols,(snake[0][1]+dir[1]+rows)%rows]; if (snake.some(([x,y])=>x===head[0]&&y===head[1])) running=false; snake.unshift(head); if (head[0]===food[0]&&head[1]===food[1]){ score++; placeFood(); } else snake.pop(); draw(); }
function draw(){ ctx.clearRect(0,0,W,H); ctx.fillStyle='rgba(0,0,0,.2)'; ctx.fillRect(0,0,W,H); ctx.fillStyle='#00ffc8'; snake.forEach(([x,y])=>ctx.fillRect(x*cw,y*cw,cw-2,cw-2)); ctx.fillStyle='#34d399'; ctx.fillRect(food[0]*cw,food[1]*cw,cw-2,cw-2); ctx.fillStyle='#aee7df'; ctx.fillText('Score '+score,6,14); }
let t; function onKey(e){ const k=e.key; if(k==='ArrowUp'||k==='w'||k==='W') dir=[0,-1]; else if(k==='ArrowDown'||k==='s'||k==='S') dir=[0,1]; else if(k==='ArrowLeft'||k==='a'||k==='A') dir=[-1,0]; else if(k==='ArrowRight'||k==='d'||k==='D') dir=[1,0]; }
function start(){ t=setInterval(step,130); window.addEventListener('keydown', onKey); }
window.addEventListener('terminal:interrupt', ()=>{ clearInterval(t); window.removeEventListener('keydown', onKey); });
const fs=document.createElement('div'); fs.style.cssText='position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,.6);z-index:1005;color:#e5eef8;font:14px ui-monospace;'; fs.innerHTML='<div class="card" style="padding:12px 16px">Click to enter fullscreen and play</div>'; document.body.appendChild(fs); fs.addEventListener('click', async ()=>{ try{ await document.documentElement.requestFullscreen?.(); }catch(_){} fs.remove(); start(); });
 </script>
 <script type="module" src="../assets/version.js"></script>
 </body></html>
